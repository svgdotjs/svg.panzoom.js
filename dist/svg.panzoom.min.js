/*! svg.panzoom.js v1.0.0 MIT*/;!function(){"use strict";var t=function(t){return t.touches||(t.touches=[{clientX:t.clientX,clientY:t.clientY}]),[].slice.call(t.touches)};SVG.extend(SVG.Doc,SVG.Nested,{panZoom:function(e){e=e||{};var n,o,i=e.zoomFactor||.03,s=!1,c=function(t){t.preventDefault();var e=this.zoom()-i*t.deltaY/Math.abs(t.deltaY),n=this.point(t.clientX,t.clientY);this.zoom(e,n)},a=function(e){o=t(e),o.length<2||(e.preventDefault(),this.fire("pinchZoomStart",{event:e}).event().defaultPrevented||(this.off("touchstart",a),s=!0,SVG.on(document,"touchmove",h,this,{passive:!1}),SVG.on(document,"touchend",u,this,{passive:!1})))},u=function(t){t.preventDefault(),s=!1,SVG.off(document,"touchmove",h),SVG.off(document,"touchend",u),this.on("touchstart",a)},h=function(e){e.preventDefault();var n=t(e),i=Math.sqrt(Math.pow(o[0].clientX-o[1].clientX,2)+Math.pow(o[0].clientY-o[1].clientY,2)),s=Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2)),c=i/s,a={x:n[0].clientX+.5*(n[1].clientX-n[0].clientX),y:n[0].clientY+.5*(n[1].clientY-n[0].clientY)},u={x:o[0].clientX+.5*(o[1].clientX-o[0].clientX),y:o[0].clientY+.5*(o[1].clientY-o[0].clientY)},h=this.point(a.x,a.y),l=this.point(2*a.x-u.x,2*a.y-u.y),r=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(h.x,h.y).scale(c,0,0).translate(-l.x,-l.y));this.viewbox(r),o=n,this.fire("zoom",{box:r,focus:l})},l=function(e){e.preventDefault(),this.off("mousedown",l),o=t(e),s||(n={x:o[0].clientX,y:o[0].clientY},SVG.on(document,"mousemove",f,this,{passive:!1}),SVG.on(document,"mouseup",r,this,{passive:!1}))},r=function(t){t.preventDefault(),SVG.off(document,"mousemove",f),SVG.off(document,"mouseup",r),this.on("mousedown",l)},f=function(e){e.preventDefault();var o=t(e),i={x:o[0].clientX,y:o[0].clientY},s=this.point(i.x,i.y),c=this.point(n.x,n.y),a=[c.x-s.x,c.y-s.y],u=new SVG.Box(this.viewbox()).transform((new SVG.Matrix).translate(a[0],a[1]));this.viewbox(u),n=i};return this.on("wheel",c),this.on("touchstart",a,this,{passive:!1}),this.on("mousedown",l,this),this},zoom:function(t,e){var n=window.getComputedStyle(this.node),o=parseFloat(n.getPropertyValue("width")),i=parseFloat(n.getPropertyValue("height")),s=this.viewbox(),c=o/s.width,a=i/s.height,u=Math.min(c,a);if(null==t)return u;var h=u/t;e=e||new SVG.Point(o/2/c+s.x,i/2/a+s.y);var l=new SVG.Box(s).transform((new SVG.Matrix).scale(h,e.x,e.y));return this.fire("zoom",{box:l,focus:e}).event().defaultPrevented?this:this.viewbox(l)}}),SVG.extend(SVG.FX,{zoom:function(t,e){return this.add("zoom",new SVG.Number(t),e)}})}();